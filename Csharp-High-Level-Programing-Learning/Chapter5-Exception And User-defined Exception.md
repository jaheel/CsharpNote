## 第5章 异常与自定义异常

### 建议58：用抛出异常代替返回错误代码

```
User user = new User();
            try
            {
                SaveUser(user);
            }
            catch (IOException)
            {
                //IO异常，通知当前用户
            }
            catch (UnauthorizedAccessException)
            {
                //权限失败，通知客户端管理员
            }
            catch (CommunicationException)
            {
                //网络异常，通知发送e-mail给网络管理员。
            }
```

### 建议59：不要在不恰当的场合下引发异常

* 正常的业务流程不应使用异常来处理
* 不要总是尝试去捕获异常或引发异常，而应该允许异常向调用堆栈往上传播

### 建议60：重新引发异常时使用Inner Exception

例如：用户只需知道网络连接失败，开发者可知网络连接失败的具体原因：网络繁忙，对方未侦听等。

### 建议61：避免在finally内撰写无效代码

即使return在try中，finally中的代码也要执行，**但要注意代码顺序**

### 建议62：避免嵌套异常

### 建议63：避免“吃掉”异常

### 建议64：为循环增加Tester-Doer模式而不是将try-catch置于循环内

### 建议65：总是处理未捕获的异常

### 建议66：正确捕获多线程中的异常

### 建议67：慎用自定义异常

​    **除非有充分的理由，否则一般不要创建自定义异常**

### 建议68：从System.Exception或其他常见的基本异常中派生异常

### 建议69：应使用finally避免资源泄露

在finally中释放资源

### 建议70：避免在调用栈较低的位置记录异常

